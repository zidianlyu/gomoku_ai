(this["webpackJsonpgokomu-ai"]=this["webpackJsonpgokomu-ai"]||[]).push([[0],{131:function(e,t,a){e.exports=a.p+"static/media/board.42ec9618.png"},144:function(e,t,a){e.exports=a(236)},158:function(e,t){},160:function(e,t){},193:function(e,t){},194:function(e,t){},236:function(e,t,a){"use strict";a.r(t);var r,n,o,i,c=a(0),s=a.n(c),l=a(18),u=a.n(l),h=a(9),d=a(10),p=a(16),b=a(15),f=a(17),m=a(259),v=a(284),g=a(281),O=a(262),y=a(276),k=a(237),j=a(2),w=a(286),S=function(e){var t;return t={maxWidth:e.spacing(69)},Object(j.a)(t,e.breakpoints.down(560),{maxWidth:e.spacing(52)}),Object(j.a)(t,e.breakpoints.down(450),{maxWidth:e.spacing(48)}),Object(j.a)(t,e.breakpoints.down(380),{maxWidth:"inherit"}),t},E=a(260),C=s.a.createContext({});!function(e){e[e.VsHuman=0]="VsHuman",e[e.VsAgent=1]="VsAgent"}(r||(r={})),function(e){e[e.Open=0]="Open",e[e.Over=1]="Over"}(n||(n={})),function(e){e[e.easy=4]="easy",e[e.medium=6]="medium",e[e.hard=8]="hard"}(o||(o={})),function(e){e[e.Empty=0]="Empty",e[e.Agent=1]="Agent",e[e.Human=2]="Human"}(i||(i={}));var x=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"_placeChess",value:function(e,t){this.context.board.board[e][t]!==i.Empty||this.context.status!==n.Open||this.context.aiThinking||this.context.placeChess(e,t),this.context.status===n.Over&&this.context.openDialog()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.theme,n=t.row,o=t.col,i=t.color,c=t.backgroundColor,l=t.label,u=t.shadow,h=r.shadows[u];return s.a.createElement(m.a,{container:!0,justify:"center",alignItems:"center",className:a.cell,style:{backgroundColor:c,color:i,boxShadow:h},onClick:function(){return e._placeChess(n,o)}},l||"")}}]),t}(s.a.Component);x.contextType=C;var F=Object(k.a)((function(e){return Object(w.a)({cell:Object(j.a)({borderRadius:"50%",cursor:"pointer",fontSize:12,fontWeight:400,height:24,lineHeight:0,transition:"all 500ms",width:24},e.breakpoints.down("xs"),{fontSize:9,height:17,width:17})})}))(Object(E.a)(x)),T=a(131),B=a.n(T),A=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"Row",value:function(e,t){return e.map((function(e,a){var r=e.color,n=e.backgroundColor,o=e.label,i=e.shadow;return s.a.createElement(F,{key:a,row:t,col:a,color:r,backgroundColor:n,label:o,shadow:i})}))}},{key:"ChessBoard",value:function(e){var t=this;return e.map((function(e,a){return s.a.createElement(m.a,{container:!0,key:a,className:"board-row",direction:"row",justify:"space-between"},t.Row(e,a))}))}},{key:"render",value:function(){var e=this.props.classes,t=e.boardWrapper,a=e.boardImage,r=e.board,n=e.chessSteps,o=this.context.board.displayBoard;return s.a.createElement(m.a,{container:!0,direction:"column",alignItems:"center",spacing:3,className:t},s.a.createElement(m.a,{className:r},s.a.createElement(m.a,{className:a},s.a.createElement("img",{src:B.a,alt:"board"})),s.a.createElement(m.a,{className:n,container:!0,justify:"center",alignItems:"center"},this.ChessBoard(o))))}}]),t}(s.a.Component);A.contextType=C;var _=Object(k.a)((function(e){var t,a;return Object(w.a)({boardWrapper:{color:e.palette.common.black,padding:e.spacing(2.5,2)},board:(t={},Object(j.a)(t,e.breakpoints.down(380),{height:367,width:367}),Object(j.a)(t,"height",535),Object(j.a)(t,"overflow","hidden"),Object(j.a)(t,"position","relative"),Object(j.a)(t,"width",535),t),boardImage:{"& img":{height:"100%",width:"100%"},borderRadius:4,height:"100%",overflow:"hidden"},chessSteps:(a={},Object(j.a)(a,e.breakpoints.down(380),{padding:e.spacing(1/8)}),Object(j.a)(a,"height","100%"),Object(j.a)(a,"padding",e.spacing(0,1/8)),Object(j.a)(a,"position","absolute"),Object(j.a)(a,"top",0),Object(j.a)(a,"width","100%"),a)})}))(A),D=a(90),P=a(132),N=a(133),H=a(261),M=a(135),W=a(285),L=[{name:"Profile",link:"https://www.zidianlyu.com",icon:P.a},{name:"LinkedIn",link:"https://www.linkedin.com/in/zidianlyu/",icon:D.b},{name:"Github",link:"https://github.com/zidianlyu",icon:D.a}],R=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a="xs"===e.width;return s.a.createElement(m.a,{className:t.footer,container:!0,direction:"row",justify:"space-between",spacing:1},L.map((function(e,r){var n=e.name,o=e.link,i=e.icon;return s.a.createElement(m.a,{item:!0,xs:4,key:r},s.a.createElement(H.a,{className:t.button,color:"primary",fullWidth:!0,href:o,startIcon:s.a.createElement(N.a,{icon:i,size:"sm"}),variant:"contained"},s.a.createElement(M.a,{variant:a?"button":"h6"},n)))})))}}]),t}(s.a.Component),z=Object(W.a)()(Object(k.a)((function(e){return Object(w.a)({button:Object(j.a)({boxShadow:e.shadows[0],fontWeight:500,textTransform:"initial"},e.breakpoints.down("xs"),{textTransform:"uppercase"}),footer:Object(j.a)({padding:e.spacing(1.5)},e.breakpoints.down("xs"),{padding:e.spacing(1)})})}))(R)),I=a(268),V=a(269),G=a(273),Z=a(264),U=a(6),J=a(270),Y=a(271),q=a(272),K=function(e){var t=12;switch(e.size){case"lg":t=36;break;case"md":t=12;break;case"sm":t=8;break;case"xs":t=4}return s.a.createElement("div",{style:{height:t,width:1}})},$=a(279),Q=a(263),X=a(265),ee=a(266),te=a(282),ae=a(287),re=a(283),ne=a(267),oe=a(280),ie=Object(U.a)((function(e){return Object(w.a)({paperFullWidth:Object(j.a)({width:360},e.breakpoints.down("xs"),{margin:0,width:300})})}))($.a),ce=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).state={aiLevel:o.easy,firstHand:i.Human,gameMode:r.VsAgent},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"setGameMode",value:function(e){this.setState({gameMode:e})}},{key:"handleGameModeChange",value:function(e){var t=Number(e.target.value);this.setState({gameMode:t})}},{key:"handleFirstHandChange",value:function(e){var t=Number(e.target.value);this.setState({firstHand:t})}},{key:"handleAiLevelChange",value:function(e){var t=Number(e.target.value);this.setState({aiLevel:t})}},{key:"startNewGame",value:function(){var e=this.state,t=e.aiLevel,a=e.firstHand,r=e.gameMode;this.context.startNewGame(r,a,t),this.context.closeDialog()}},{key:"resetDialog",value:function(){this.setState({aiLevel:o.easy,firstHand:i.Human,gameMode:r.VsAgent})}},{key:"Label",value:function(e){return s.a.createElement(M.a,{variant:"body2"},e)}},{key:"render",value:function(){var e=this,t=this.state.gameMode,a=this.props.classes.button;return s.a.createElement(ie,{fullWidth:!0,maxWidth:"xs",onClose:function(){return e.context.closeDialog()},onEnter:function(){return e.resetDialog()},open:this.context.dialogOpen},s.a.createElement(Q.a,{style:{color:Z.a[500]}},"Game Setting"),s.a.createElement(X.a,null,s.a.createElement(m.a,{container:!0,direction:"column"},this.GameModeOptions,s.a.createElement(K,{size:"md"}),t===r.VsAgent&&this.FirstHandOptions,t===r.VsAgent&&this.DifficultyOption)),s.a.createElement(K,{size:"sm"}),s.a.createElement(ee.a,null,s.a.createElement(m.a,{item:!0,xs:12,sm:6},s.a.createElement(m.a,{container:!0,direction:"row",spacing:1},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(H.a,{className:a,color:"secondary",fullWidth:!0,onClick:function(){return e.context.closeDialog()},size:"small",variant:"outlined"},"Cancel")),s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(H.a,{className:a,color:"primary",fullWidth:!0,onClick:function(){return e.startNewGame()},size:"small",variant:"contained"},"Submit"))))))}},{key:"GameModeOptions",get:function(){var e=this,t=this.state.gameMode,a=this.props.classes.label;return s.a.createElement(te.a,{component:"fieldset"},s.a.createElement(ae.a,{component:"legend"},s.a.createElement(M.a,{variant:"button"},"Game Mode")),s.a.createElement(re.a,{value:t,onChange:function(t){return e.handleGameModeChange(t)},row:!0},s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("2 Players"),labelPlacement:"end",value:r.VsHuman}),s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("VS AI"),labelPlacement:"end",value:r.VsAgent})))}},{key:"FirstHandOptions",get:function(){var e=this,t=this.state.firstHand,a=this.props.classes.label;return s.a.createElement(te.a,{component:"fieldset"},s.a.createElement(ae.a,{component:"legend"},s.a.createElement(M.a,{variant:"button"},"First Hand")),s.a.createElement(re.a,{value:t,onChange:function(t){return e.handleFirstHandChange(t)},row:!0},s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("Me First"),labelPlacement:"end",value:i.Human}),s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("AI First"),labelPlacement:"end",value:i.Agent})))}},{key:"DifficultyOption",get:function(){var e=this,t=this.state.aiLevel,a=this.props.classes.label;return s.a.createElement(te.a,null,s.a.createElement(ae.a,{component:"legend"},s.a.createElement(M.a,{variant:"button"},"Level")),s.a.createElement(re.a,{onChange:function(t){return e.handleAiLevelChange(t)},value:t},s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("Easy"),labelPlacement:"end",value:o.easy}),s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("Medium"),labelPlacement:"end",value:o.medium}),s.a.createElement(ne.a,{className:a,control:s.a.createElement(oe.a,{color:"primary"}),label:this.Label("Difficult"),labelPlacement:"end",value:o.hard})))}}]),t}(s.a.Component);ce.contextType=C;var se=Object(W.a)()(Object(U.a)((function(e){return Object(w.a)({button:{boxShadow:e.shadows[0],textTransform:"initial"},label:{width:"50%",margin:0}})}))(ce));function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(m.a,{className:e.header},this.Top,s.a.createElement(K,{size:"sm"}),this.Instruction)}},{key:"nextTurnColorNotice",get:function(){var e=this.context,t=e.status,a=e.board;return t===n.Over?V.a[600]:1&a.stepCount?"white":"black"}},{key:"nextStepCountNotice",get:function(){var e=this.context,t=e.board,a=e.status,r=e.winner;return a===n.Over?r.role===i.Empty?0:t.stepCount:t.stepCount+1}},{key:"twoPlayersWinColor",get:function(){return 1&this.context.board.stepCount?"Black":"White"}},{key:"textMessage",get:function(){var e=this.context,t=e.aiThinking,a=e.board,o=e.mode,c=e.role,s=e.status,l=e.winner;return t?"AI is thinking...":l.role!==i.Empty?o===r.VsAgent?l.role===i.Human?"Congratulations! You win!!":"Good luck next time! AI win!!":"".concat(this.twoPlayersWinColor," role's win!"):s===n.Over?"Please start a new game!":o===r.VsAgent?c===i.Human?"Your turn!":"AI turn!":1&a.stepCount?"White role's turn!":"Black role's turn!"}},{key:"Top",get:function(){var e=this.props,t=e.classes,a=e.width,r=t.title,n=t.notice,o=t.chess,i="xs"===a;return s.a.createElement(m.a,{item:!0,xs:12},s.a.createElement(m.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(M.a,{variant:i?"h4":"h3",className:r},"GoMoKu")),s.a.createElement(m.a,{item:!0,xs:4},s.a.createElement(m.a,{container:!0,spacing:1,direction:"row"},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(m.a,{container:!0,direction:"column",className:n,alignItems:"center"},s.a.createElement(M.a,{variant:i?"button":"h6"},"Turn"),s.a.createElement(K,{size:"xs"}),s.a.createElement(m.a,{className:o,style:{backgroundColor:this.nextTurnColorNotice}}))),s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(m.a,{container:!0,direction:"column",className:n,alignItems:"center",justify:"center"},s.a.createElement(M.a,{variant:i?"button":"h6"},"Step"),s.a.createElement(M.a,{variant:"body2",align:"center",style:{color:this.nextTurnColorNotice,fontWeight:500}},this.nextStepCountNotice)))))))}},{key:"Instruction",get:function(){var e=this,t=this.props,a=t.classes,r="xs"===t.width,o=a.button,i=a.message;return s.a.createElement(m.a,{alignItems:"center",container:!0,direction:"row",justify:"space-between"},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(M.a,{variant:"button",className:i},this.textMessage)),this.context.status===n.Open&&s.a.createElement(m.a,{item:!0,xs:2},s.a.createElement(m.a,{container:!0,direction:"row"},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(I.a,{size:"small",color:"primary",onClick:function(){return e.context.stepBackward()},disabled:!this.context.board.recordedSteps.length},s.a.createElement(J.a,null))),s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(I.a,{size:"small",color:"primary",onClick:function(){return e.context.stepForward()},disabled:!this.context.board.backwardSteps.length},s.a.createElement(Y.a,null))))),s.a.createElement(m.a,{item:!0,xs:4},s.a.createElement(H.a,{className:o,color:"primary",fullWidth:!0,onClick:function(){return e.context.openDialog()},startIcon:s.a.createElement(q.a,null),style:{backgroundColor:this.context.status===n.Over?G.a[500]:Z.a[500]},variant:"contained"},s.a.createElement(M.a,{variant:r?"button":"h6"},r?"Start":"New Game")),s.a.createElement(se,null)))}}]),t}(s.a.Component);he.contextType=C;var de=Object(W.a)()(Object(U.a)((function(e){return Object(w.a)({title:{color:Z.a[600],fontWeight:600},chess:Object(j.a)({borderRadius:"50%",boxShadow:e.shadows[3],height:12,width:12},e.breakpoints.down("xs"),{height:10,width:10}),button:{boxShadow:e.shadows[0],textTransform:"initial"},notice:ue({},e.shape,{backgroundColor:Z.a[400],color:e.palette.common.white,height:"100%",padding:e.spacing(1,0,1)}),header:Object(j.a)({background:e.palette.common.white,color:e.palette.common.black,padding:e.spacing(2.5,1.5,1.5,2)},e.breakpoints.down("xs"),{padding:e.spacing(2.5,1.5,1,2)}),message:Object(j.a)({color:Z.a[500],fontSize:15,fontWeight:400,paddingLeft:e.spacing(.7),textTransform:"initial"},e.breakpoints.down("xs"),{fontSize:12,paddingLeft:e.spacing(.5)})})}))(he)),pe=a(274),be=a(275),fe=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes.analyzer;return s.a.createElement(m.a,{className:e,container:!0,direction:"row",justify:"space-between",spacing:1},s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(H.a,{color:"primary",disableRipple:!0,fullWidth:!0,startIcon:s.a.createElement(pe.a,null),variant:"outlined"},this.score)),s.a.createElement(m.a,{item:!0,xs:6},s.a.createElement(H.a,{color:"primary",disableRipple:!0,fullWidth:!0,startIcon:s.a.createElement(be.a,null),variant:"outlined"},this.timer)))}},{key:"score",get:function(){var e="xs"===this.props.width?"":"Score: ";return"".concat(e).concat(this.context.aiScore)}},{key:"timer",get:function(){var e="xs"===this.props.width?"":"Timer: ";return"".concat(e).concat(this.context.aiTimer/1e3,"s")}}]),t}(s.a.Component);fe.contextType=C;var me=Object(W.a)()(Object(k.a)((function(e){return Object(w.a)({button:{boxShadow:e.shadows[0]},analyzer:Object(j.a)({padding:e.spacing(1.5,1.5,0)},e.breakpoints.down("xs"),{padding:e.spacing(1,1,0)})})}))(fe));function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe=function(e){function t(){return Object(h.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=e.app,a=e.paper;return s.a.createElement(m.a,{container:!0,direction:"row",justify:"center",className:t},s.a.createElement(v.a,null),s.a.createElement(g.a,{in:!0,timeout:800},s.a.createElement(O.a,{elevation:5,square:!1,className:a},s.a.createElement(de,null),s.a.createElement(y.a,null),s.a.createElement(_,null),s.a.createElement(y.a,null),this.context.status===n.Open&&this.context.mode===r.VsAgent&&s.a.createElement(me,null),s.a.createElement(z,null))))}}]),t}(s.a.Component);Oe.contextType=C;var ye=Object(k.a)((function(e){return Object(w.a)({app:Object(j.a)({marginTop:e.spacing(3)},e.breakpoints.down(380),{marginTop:0}),paper:ge({},S(e),{width:"100%",overflow:"hidden",marginBottom:e.spacing(10)})})}))(Oe),ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var we,Se,Ee,Ce,xe,Fe,Te=a(278),Be=a(134),Ae=a(277),_e=a(68),De=a(69),Pe=Object(Be.a)({palette:{primary:{main:Z.a[500]},secondary:Ae.a,error:_e.a},status:{danger:De.a[500]}}),Ne=a(21),He=1e5,Me=1,We=8;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left",e[e.Down=2]="Down",e[e.Up=3]="Up",e[e.RightDown=4]="RightDown",e[e.LeftUp=5]="LeftUp",e[e.LeftDown=6]="LeftDown",e[e.RightUp=7]="RightUp"}(we||(we={})),function(e){e[e.Row=0]="Row",e[e.Col=1]="Col",e[e.Des=2]="Des",e[e.Asc=3]="Asc"}(Se||(Se={})),function(e){e[e.Max=1e8]="Max",e[e.Five=1e7]="Five",e[e.Four=1e5]="Four",e[e.BlockedFour=1e4]="BlockedFour",e[e.Three=1e3]="Three",e[e.BlockedThree=100]="BlockedThree",e[e.Two=100]="Two",e[e.BlockedTwo=10]="BlockedTwo",e[e.One=10]="One",e[e.BlockedOne=10]="BlockedOne",e[e.Zero=0]="Zero",e[e.Min=-1e8]="Min"}(Ee||(Ee={})),function(e){e[e.Default=-1]="Default",e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(Ce||(Ce={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two"}(xe||(xe={})),function(e){e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight"}(Fe||(Fe={}));var Le,Re,ze,Ie,Ve,Ge,Ze,Ue,Je,Ye,qe,Ke,$e,Qe,Xe,et,tt,at,rt,nt=function(e,t,a,r){for(var n=[],o=function(e,t){return e>=0&&t>=0&&e<19&&t<19},i=Se.Row,c=Se.Col,s=Se.Des,l=Se.Asc,u=0,h=[i,c,s,l];u<h.length;u++){var d=h[u];n=[];for(var p=0;p<5;p++){var b=t,f=a+p;switch(d){case i:b=t,f=a+p;break;case c:b=t+p,f=a;break;case s:b=t+p,f=a+p;break;case l:b=t+p,f=a-p}if(!o(b,f)||e[b][f]!==r)break;n.push([b,f])}if(5===n.length)return n}return[]},ot=function(e){for(var t=e.board,a=0;a<19;a++)for(var r=0;r<19;r++){var n=t[a][r];if(n!==i.Empty){var o=nt(t,a,r,n);if(o.length)return{role:n,winPoints:o}}}return{role:i.Empty,winPoints:[]}},it=(rt={},Object(j.a)(rt,Ce.Zero,(ze={},Object(j.a)(ze,xe.Zero,(Le={},Object(j.a)(Le,Fe.One,Ee.One),Object(j.a)(Le,Fe.Two,Ee.Two),Object(j.a)(Le,Fe.Three,Ee.Three),Object(j.a)(Le,Fe.Four,Ee.Four),Le)),Object(j.a)(ze,xe.One,(Re={},Object(j.a)(Re,Fe.One,Ee.BlockedOne),Object(j.a)(Re,Fe.Two,Ee.BlockedTwo),Object(j.a)(Re,Fe.Three,Ee.BlockedThree),Object(j.a)(Re,Fe.Four,Ee.BlockedFour),Re)),ze)),Object(j.a)(rt,Ce.One,(Ge={},Object(j.a)(Ge,xe.Zero,(Ie={},Object(j.a)(Ie,Fe.Two,Ee.Two/2),Object(j.a)(Ie,Fe.Three,Ee.Three),Object(j.a)(Ie,Fe.Four,Ee.BlockedFour),Object(j.a)(Ie,Fe.Five,Ee.Four),Ie)),Object(j.a)(Ge,xe.One,(Ve={},Object(j.a)(Ve,Fe.Two,Ee.BlockedTwo),Object(j.a)(Ve,Fe.Three,Ee.BlockedThree),Object(j.a)(Ve,Fe.Four,Ee.BlockedFour),Object(j.a)(Ve,Fe.Five,Ee.BlockedFour),Ve)),Ge)),Object(j.a)(rt,Ce.Two,(Ye={},Object(j.a)(Ye,xe.Zero,(Ze={},Object(j.a)(Ze,Fe.Three,Ee.Three),Object(j.a)(Ze,Fe.Four,Ee.BlockedFour),Object(j.a)(Ze,Fe.Five,Ee.BlockedFour),Object(j.a)(Ze,Fe.Six,Ee.Four),Ze)),Object(j.a)(Ye,xe.One,(Ue={},Object(j.a)(Ue,Fe.Three,Ee.BlockedThree),Object(j.a)(Ue,Fe.Four,Ee.BlockedFour),Object(j.a)(Ue,Fe.Five,Ee.BlockedFour),Object(j.a)(Ue,Fe.Six,Ee.Four),Ue)),Object(j.a)(Ye,xe.Two,(Je={},Object(j.a)(Je,Fe.Four,Ee.BlockedFour),Object(j.a)(Je,Fe.Five,Ee.BlockedFour),Object(j.a)(Je,Fe.Six,Ee.BlockedFour),Je)),Ye)),Object(j.a)(rt,Ce.Three,(Qe={},Object(j.a)(Qe,xe.Zero,(qe={},Object(j.a)(qe,Fe.Four,Ee.Three),Object(j.a)(qe,Fe.Five,Ee.Three),Object(j.a)(qe,Fe.Six,Ee.BlockedFour),Object(j.a)(qe,Fe.Seven,Ee.Four),qe)),Object(j.a)(Qe,xe.One,(Ke={},Object(j.a)(Ke,Fe.Four,Ee.BlockedFour),Object(j.a)(Ke,Fe.Five,Ee.BlockedFour),Object(j.a)(Ke,Fe.Six,Ee.BlockedFour),Object(j.a)(Ke,Fe.Seven,Ee.Four),Ke)),Object(j.a)(Qe,xe.Two,($e={},Object(j.a)($e,Fe.Four,Ee.BlockedFour),Object(j.a)($e,Fe.Five,Ee.BlockedFour),Object(j.a)($e,Fe.Six,Ee.BlockedFour),Object(j.a)($e,Fe.Seven,Ee.BlockedFour),$e)),Qe)),Object(j.a)(rt,Ce.Four,(at={},Object(j.a)(at,xe.Zero,(Xe={},Object(j.a)(Xe,Fe.Five,Ee.Four),Object(j.a)(Xe,Fe.Six,Ee.Four),Object(j.a)(Xe,Fe.Seven,Ee.Four),Object(j.a)(Xe,Fe.Eight,Ee.Four),Xe)),Object(j.a)(at,xe.One,(et={},Object(j.a)(et,Fe.Four,Ee.BlockedFour),Object(j.a)(et,Fe.Five,Ee.BlockedFour),Object(j.a)(et,Fe.Six,Ee.BlockedFour),Object(j.a)(et,Fe.Seven,Ee.BlockedFour),Object(j.a)(et,Fe.Eight,Ee.Four),et)),Object(j.a)(at,xe.Two,(tt={},Object(j.a)(tt,Fe.Five,Ee.BlockedFour),Object(j.a)(tt,Fe.Six,Ee.BlockedFour),Object(j.a)(tt,Fe.Seven,Ee.BlockedFour),Object(j.a)(tt,Fe.Eight,Ee.BlockedFour),tt)),at)),rt),ct=function(e){return e>=Ee.BlockedFour&&e<Ee.Four?e<Ee.BlockedFour+Ee.Three?Ee.Three:e>=Ee.BlockedFour+Ee.Three&&e<2*Ee.BlockedFour?Ee.Four:2*Ee.Four:e},st=function(e,t,a){var r=function(e,t){if(e<=Ce.Zero)return Ce.Zero;for(var a=Ce.Default,r=0,n=[Ce.One,Ce.Two,Ce.Three,Ce.Four,Ce.Five];r<n.length;r++){var o=n[r];if(e===o||e===t-o){a=o;break}}return a}(e,a);if(r===Ce.Five||a-r>=Ce.Five)return Ee.Five;if(r in it){var n=it[r];if(t in n){var o=n[t];if(a in o)return o[a]}}return Ee.Zero},lt=function(e,t,a,r,n,o){var c=Se.Row,s=Se.Col,l=Se.Des,u=Se.Asc,h=0,d=-1,p=0,b=1,f=function(e,t){return e>=0&&t>=0&&e<19&&t<19},m=function(){d=-1,p=0,b=1},v=function(t,a){return!!f(t,a)&&e[t][a]===n};if(void 0===o||o===c){m();for(var g=a,O=r+1;g===a&&O<1/0;g+=0,O++){if(!f(g,O)){p++;break}var y=e[g][O];if(y===i.Empty){if(-1===d&&v(g,O+1)){d=b;continue}break}if(y!==n){p++;break}b++}for(var k=a,j=r-1;k===a&&j>-1/0;k+=0,j--){if(!f(k,j)){p++;break}var w=e[a][j];if(w===i.Empty){if(-1===d&&v(k,j-1)){d=0;continue}break}if(w!==n){p++;break}b++,-1!==d&&d++}t[n][c][a][r]=st(d,p,b)}if(h+=t[n][c][a][r],void 0===o||o===s){m();for(var S=a+1,E=r;S<1/0&&E===r;S++,E+=0){if(!f(S,E)){p++;break}var C=e[S][r];if(C===i.Empty){if(-1===d&&v(S+1,E)){d=b;continue}break}if(C!==n){p++;break}b++}for(var x=a-1,F=r;x>-1/0&&F===r;x--,F+=0){if(!f(x,F)){p++;break}var T=e[x][r];if(T===i.Empty){if(-1===d&&x>0&&v(x-1,F)){d=0;continue}break}if(T!==n){p++;break}b++,-1!==d&&d++}t[n][s][a][r]=st(d,p,b)}if(h+=t[n][s][a][r],void 0===o||o===l){m();for(var B=a+1,A=r+1;B<1/0&&A<1/0;B++,A++){if(!f(B,A)){p++;break}var _=e[B][A];if(_===i.Empty){if(-1===d&&v(B+1,A+1)){d=b;continue}break}if(_!==n){p++;break}b++}for(var D=a-1,P=r-1;D>-1/0&&P>-1/0;D--,P--){if(!f(D,P)){p++;break}var N=e[D][P];if(N===i.Empty){if(-1===d&&v(D-1,P-1)){d=0;continue}break}if(N!==n){p++;break}b++,-1!==d&&d++}t[n][l][a][r]=st(d,p,b)}if(h+=t[n][l][a][r],void 0===o||o===u){m();for(var H=a+1,M=r-1;H<1/0&&M>-1/0;H++,M--){if(!f(H,M)){p++;break}var W=e[H][M];if(W===i.Empty){if(-1===d&&v(H+1,M-1)){d=b;continue}break}if(W!==n){p++;break}b++}for(var L=a-1,R=r+1;L>-1/0&&R<1/0;L--,R++){if(!f(L,R)){p++;break}var z=e[L][R];if(z===i.Empty){if(-1===d&&v(L-1,R+1)){d=0;continue}break}if(z!==n){p++;break}b++,-1!==d&&d++}t[n][u][a][r]=st(d,p,b)}return h+=t[n][u][a][r]},ut=function(){for(var e=[],t=0;t<19;t++){for(var a=[],r=0;r<19;r++)a.push(i.Empty);e.push(a)}return e},ht=function(e,t){return{point:[e,t],humanScore:0,agentScore:0,score:0,role:i.Empty}},dt=function(){return{aiLevel:o.easy,aiThinking:!1,aiScore:0,aiTimer:0,board:new Ot,firstHand:i.Human,mode:r.VsAgent,role:i.Human,status:n.Over,winner:{role:i.Empty,winPoints:[]}}},pt=function(){return Number(new Date)},bt=function(e){return e===i.Agent?i.Human:i.Agent},ft=function(e,t){if(!t||!t.length)return!1;var a=Object(Ne.a)(e.point,2),r=a[0],n=a[1],o=!0,i=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,h=Object(Ne.a)(u.point,2),d=h[0],p=h[1],b=[Math.abs(r-d),Math.abs(n-p)],f=b[0],m=b[1];if(f>=5||m>=5)return!1;if(r!==d&&n!==p&&f!==m)return!1}}catch(v){i=!0,c=v}finally{try{o||null==l.return||l.return()}finally{if(i)throw c}}return!0},mt=a(92),vt=mt.a.autoSeed(),gt=function(){function e(){Object(h.a)(this,e),this.hashCode=this._random(),this.agentStepTags=ut(),this.humanStepTags=ut(),this.reset()}return Object(d.a)(e,[{key:"_random",value:function(){return Object(mt.b)(1,1e9)(vt)}},{key:"reset",value:function(){for(var e=0;e<19;e++)for(var t=0;t<19;t++)this.agentStepTags[e][t]=this._random(),this.humanStepTags[e][t]=this._random()}},{key:"updateHashCode",value:function(e,t,a){this.hashCode^=a===i.Agent?this.agentStepTags[e][t]:this.humanStepTags[e][t]}}]),e}(),Ot=function(){function e(){var t=this;Object(h.a)(this,e),this.zobrist=new gt,this.board=[],this.displayBoard=[],this.scoreCache=[],this.optionalSteps=[],this.recordedSteps=[],this.backwardSteps=[],this.agentScores=[],this.humanScores=[],this.stepCount=0,this.placeCount=0,this.cleanCount=0,this._updateRoleBoardScore=function(e,a,r){var n=t.board[e][a],o=t.board,c=t.scoreCache;n!==i.Human?t.agentScores[e][a]=lt(o,c,e,a,i.Agent,r):t.agentScores[e][a]=0,n!==i.Agent?t.humanScores[e][a]=lt(o,c,e,a,i.Human,r):t.humanScores[e][a]=0},this.reset()}return Object(d.a)(e,[{key:"reset",value:function(){this.zobrist.reset(),this.board=ut(),this.displayBoard=function(){for(var e=[],t=0;t<19;t++){for(var a=[],r=0;r<19;r++)a.push({color:"inherit",backgroundColor:"inherit",shadow:0,label:0});e.push(a)}return e}(),this.scoreCache=function(){var e,t,a;return a={},Object(j.a)(a,i.Agent,(e={},Object(j.a)(e,Se.Row,ut()),Object(j.a)(e,Se.Col,ut()),Object(j.a)(e,Se.Des,ut()),Object(j.a)(e,Se.Asc,ut()),e)),Object(j.a)(a,i.Human,(t={},Object(j.a)(t,Se.Row,ut()),Object(j.a)(t,Se.Col,ut()),Object(j.a)(t,Se.Des,ut()),Object(j.a)(t,Se.Asc,ut()),t)),a}(),this.optionalSteps=[],this.recordedSteps=[],this.backwardSteps=[],this.agentScores=ut(),this.humanScores=ut(),this.stepCount=0,this.placeCount=0,this.cleanCount=0}},{key:"initWithBoard",value:function(e){this.board=e,this.stepCount=function(e){var t=0,a=!0,r=!1,n=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,l=!0,u=!1,h=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){d.value!==i.Empty&&t++}}catch(b){u=!0,h=b}finally{try{l||null==p.return||p.return()}finally{if(u)throw h}}}}catch(b){r=!0,n=b}finally{try{a||null==c.return||c.return()}finally{if(r)throw n}}return t}(e),this._initScore()}},{key:"_initScore",value:function(){for(var e=this.board,t=this.scoreCache,a=0;a<19;a++)for(var r=0;r<19;r++){var n=this.board[a][r];n===i.Empty?this._hasNeighbor(a,r,2,2)&&(this.agentScores[a][r]=lt(e,t,a,r,i.Agent,void 0),this.humanScores[a][r]=lt(e,t,a,r,i.Human)):n===i.Agent?(this.agentScores[a][r]=lt(e,t,a,r,i.Agent),this.humanScores[a][r]=0):n===i.Human&&(this.humanScores[a][r]=lt(e,t,a,r,i.Human),this.agentScores[a][r]=0)}}},{key:"_updateScoreOnMoveDirection",value:function(e,t){for(var a=Se.Row,r=Se.Col,n=Se.Des,o=Se.Asc,i=-4;i<=4;i++){var c=e;if(!((l=t+i)<0)){if(l>=19)break;this._updateRoleBoardScore(c,l,a)}}for(var s=-4;s<=4;s++){var l=t;if(!((c=e+s)<0)){if(c>=19)break;this._updateRoleBoardScore(c,l,r)}}for(var u=-4;u<=4;u++){l=t+u;if(!((c=e+u)<0||l<0)){if(c>=19||l>=19)break;this._updateRoleBoardScore(c,l,n)}}for(var h=-4;h<=4;h++){l=t-h;(c=e+h)<0||l<0||(c>=19||l>=19||this._updateRoleBoardScore(c,l,o))}}},{key:"updateWinPoints",value:function(e){var t=!0,a=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value,c=Object(Ne.a)(i,2),s=c[0],l=c[1],u=this.displayBoard[s][l];u.backgroundColor=V.a[600],u.color=Z.a[600]}}catch(h){a=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}}},{key:"_updateDisplayBoard",value:function(e,t,a){if(a){var r=1&this.stepCount;this.displayBoard[e][t]={color:r?"white":"black",backgroundColor:r?"black":"white",shadow:2,label:this.stepCount}}else this.displayBoard[e][t]={color:"inherit",backgroundColor:"inherit",shadow:0,label:0}}},{key:"placeChess",value:function(e,t){this.placeCount++;var a=Object(Ne.a)(e.point,2),r=a[0],n=a[1];e.role=t,this.board[r][n]=t,this.stepCount++,this._updateDisplayBoard(r,n,!0),this.zobrist.updateHashCode(r,n,t),this._updateScoreOnMoveDirection(r,n),this.recordedSteps.push(e),this.optionalSteps.push(e)}},{key:"cleanChess",value:function(e){this.cleanCount++;var t=Object(Ne.a)(e.point,2),a=t[0],r=t[1],n=this.board[a][r];this.board[a][r]=i.Empty,this.stepCount--,this._updateDisplayBoard(a,r,!1),this.zobrist.updateHashCode(a,r,n),this._updateScoreOnMoveDirection(a,r),this.recordedSteps.pop(),this.optionalSteps.pop()}},{key:"stepBackward",value:function(e){var t=e===r.VsAgent?2:1;if(!(this.recordedSteps.length<t))for(var a=0;a<t;a++){var n=this.recordedSteps[this.recordedSteps.length-1];this.cleanChess(n),this.backwardSteps.push(n)}}},{key:"stepForward",value:function(e){var t=e===r.VsAgent?2:1;if(!(this.backwardSteps.length<t))for(var a=0;a<t;a++){var n=this.backwardSteps.pop();this.placeChess(n,n.role)}}},{key:"_hasNeighbor",value:function(e,t,a,r){for(var n=this.board,o=e+a,c=t-a,s=t+a,l=e-a;l<=o;l++)if(!(l<0||l>=19))for(var u=c;u<=s;u++)if(!(u<0||u>=19)&&(l!==e||u!==t)&&n[l][u]!==i.Empty&&--r<=0)return!0;return!1}},{key:"_updateStepsOnSkipLayers",value:function(e,t,a){for(;a>=0;){var r=this.optionalSteps[a];if(t===i.Agent&&r.agentScore>=Ee.Three||t===i.Human&&r.humanScore>=Ee.Three){e.push(r);break}a-=2}e.length||e.push(this.optionalSteps[0].role===t?this.optionalSteps[0]:this.optionalSteps[1])}},{key:"evaluateBoard",value:function(e){for(var t=0,a=0,r=this.board,n=0;n<19;n++)for(var o=0;o<19;o++)r[n][o]===i.Agent&&(t+=ct(this.agentScores[n][o])),r[n][o]===i.Human&&(a+=ct(this.humanScores[n][o]));return(e===i.Agent?1:-1)*(t-a)}},{key:"heuristicEvaluate",value:function(e,t,a){if(this.stepCount<=0)return[{point:[Math.floor(9.5),Math.floor(9.5)],humanScore:0,agentScore:0,score:0,role:e}];var r=[],n=[],o=[],c=[],s=[],l=[],u=[],h=[],d=[],p=[],b=[],f=[],m=[],v=[],g=this.board;a&&(this._updateStepsOnSkipLayers(c,bt(e),this.optionalSteps.length-1),this._updateStepsOnSkipLayers(o,e,this.optionalSteps.length-2));for(var O=0;O<19;O++)for(var y=0;y<19;y++)if(g[O][y]===i.Empty){if(this.recordedSteps.length<6){if(!this._hasNeighbor(O,y,1,1))continue}else if(!this._hasNeighbor(O,y,2,2))continue;var k=this.agentScores[O][y],j=this.humanScores[O][y],w=Math.max(k,j);if(t&&w<Ee.Three)continue;var S={point:[O,y],humanScore:j,agentScore:k,score:w,role:e};if(a){var E=this.optionalSteps[this.optionalSteps.length-1];if(w>=Ee.Four);else if(w>=Ee.BlockedFour&&ft(E,c));else if(!ft(S,o)&&!ft(S,c))continue}k>=Ee.Five?r.push(S):j>=Ee.Five?r.push(S):k>=Ee.Four?s.push(S):j>=Ee.Four?p.push(S):k>=Ee.BlockedFour?l.push(S):j>=Ee.BlockedFour?b.push(S):k>=2*Ee.Three?u.push(S):j>=2*Ee.Three?f.push(S):k>=Ee.Three?h.push(S):j>=Ee.Three?m.push(S):k>=Ee.Two?d.unshift(S):j>=Ee.Two?v.unshift(S):n.push(S)}if(r.length)return r;if(e===i.Agent&&s.length)return s;if(e===i.Human&&p.length)return p;if(e===i.Agent&&p.length&&!l.length)return p;if(e===i.Human&&s.length&&!b.length)return s;var C=e===i.Agent?s.concat(p):p.concat(s),x=e===i.Agent?l.concat(b):b.concat(l);if(C.length)return C.concat(x);var F=[];if(e===i.Agent&&(F=u.concat(f).concat(l).concat(b).concat(h).concat(m)),e===i.Human&&(F=f.concat(u).concat(b).concat(l).concat(m).concat(h)),u.length||f.length)return F;if(t)return F;var T=e===i.Agent?d.concat(v):v.concat(d);return T.sort((function(e,t){return t.score-e.score})),(F=F.concat(T.length?T:n)).length>20?F.slice(0,20):F}}]),e}(),yt=function(){function e(){Object(h.a)(this,e),this.searchStartTime=pt(),this.timeout=He}return Object(d.a)(e,[{key:"reset",value:function(){this.searchStartTime=pt()}},{key:"consumed",get:function(){return pt()-this.searchStartTime}},{key:"expired",get:function(){return this.consumed>this.timeout}}]),e}(),kt=function(){function e(){Object(h.a)(this,e),this.cache={}}return Object(d.a)(e,[{key:"reset",value:function(){this.cache={}}},{key:"set",value:function(e,t,a){var r=t.boardScore,n=t.steps,o=t.stepCount;if(!t.alphaBetaPrune){var i={depth:a,record:{boardScore:r,steps:n,stepCount:o}};this.cache[e]=i}}},{key:"get",value:function(e){return this.cache[e]}}]),e}(),jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01;return t>=0?e>=t/1.15&&e<=1.15*t:e>=1.15*t&&e<=t/1.15},wt=function(e,t){return jt(e,t)||function(e,t){return t>=0?e>=1.15*(t+.1):e>=(t+.1)/1.15}(e,t)},St=function(e,t){return jt(e,t)||function(e,t){return t>=0?e<=(t-.1)/1.15:e<=1.15*(t-.1)}(e,t)},Et=function(){function e(t){var a=this;Object(h.a)(this,e),this.searchCache=new kt,this.timer=new yt,this.board=new Ot,this.leafCount=0,this.searchRecordCount=0,this.tooDeepCount=0,this.lowScoreCount=0,this.normalCount=0,this.callCount=0,this.alphaCount=0,this._getBestSearchRecord=function(e,t,r,n,o,c,s){a.callCount++;var l=a.searchCache.get(a.board.zobrist.hashCode);if(l){var u=l.record;if(l.depth>=e)return a.tooDeepCount++,{boardScore:u.boardScore,stepCount:o+u.stepCount,steps:c};if(wt(u.boardScore,Ee.Four)||St(u.boardScore,-Ee.Four))return u}var h=a.board.evaluateBoard(n),d={boardScore:h,stepCount:o,steps:c};if(e<=0||wt(h,Ee.Five)||St(h,-Ee.Five))return d;var p=a.board.stepCount>10?o>1:o>3,b=o>1,f=a.board.heuristicEvaluate(n,p,b);if(!f.length)return d;var m={boardScore:Ee.Min,stepCount:o,steps:c},v=!0,g=!1,O=void 0;try{for(var y,k=f[Symbol.iterator]();!(v=(y=k.next()).done);v=!0){var j=y.value;a.alphaCount++,a.board.placeChess(j,n);var w=e-1,S=s;S<Me&&(n===i.Agent&&j.humanScore>=Ee.Five||n===i.Human&&j.agentScore>=Ee.Five)&&(w+=2,S++);var E=c.slice();E.push(j);var C=a._getBestSearchRecord(w,-r,-t,bt(n),o+1,E,S);if(C.boardScore*=-1,a.board.cleanChess(j),C.boardScore>m.boardScore&&(m=C),t=Math.max(m.boardScore,t),wt(C.boardScore,r))return C.boardScore=Ee.Max-1,C.alphaBetaPrune=1,a.searchRecordCount++,C}}catch(x){g=!0,O=x}finally{try{v||null==k.return||k.return()}finally{if(g)throw O}}return a.normalCount++,a.searchCache.set(a.board.zobrist.hashCode,m,e),m},this._getAlpha=function(e,t,r,n,o){a.board.optionalSteps=[];var i=!0,c=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value;a.board.placeChess(h,t);var d=[h],p=a._getBestSearchRecord(r-1,-o,-n,bt(t),1,d.slice(),0);if(p.boardScore*=-1,n=Math.max(n,p.boardScore),a.board.cleanChess(h),h.record=p,a.timer.expired){console.log("timeout...");break}}}catch(b){c=!0,s=b}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}return n},this._depthSearch=function(e,t,r){a.timer.reset(),a.searchCache.reset();for(var n=2;n<=r;n+=2){var o=a._getAlpha(e,t,n,Ee.Min,Ee.Max);if(wt(o,Ee.Five))break}var i=e.map((function(e){return{point:e.point,boardScore:e.record.boardScore,stepCount:e.record.stepCount,steps:e.record.steps,timer:a.timer.consumed}}));return i.sort((function(e,t){return jt(e.boardScore,t.boardScore)?e.boardScore>=0?e.stepCount!==t.stepCount?e.stepCount-t.stepCount:t.boardScore-e.boardScore:e.stepCount!==t.stepCount?t.stepCount-e.stepCount:t.boardScore-e.boardScore:t.boardScore-e.boardScore})),i[0]},this.getSearchStep=function(e,t){e=e||i.Agent,t=t||We;var r=a.board.heuristicEvaluate(e,!1,!1);return a._depthSearch(r,e,t)},this.board=t,this.reset()}return Object(d.a)(e,[{key:"reset",value:function(){this.searchCache.reset(),this.timer.reset()}}]),e}();function Ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ct(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ct(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ft=function(e){function t(){var e,a;Object(h.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(n)))).state=xt({},dt(),{dialogOpen:!1,closeDialog:function(){return a._closeDialog()},openDialog:function(){return a._openDialog()},placeChess:function(e,t){return a._humanPlaceChess(e,t)},startNewGame:function(e,t,r){return a._initNewGame(e,t,r)},stepBackward:function(){return a._stepBackward()},stepForward:function(){return a._stepForward()}}),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"_initNewGame",value:function(e,t,a){var o=this;this.setState(xt({},dt(),{aiLevel:a,firstHand:t,mode:e,role:t,status:n.Open}),(function(){e===r.VsAgent&&t===i.Agent&&o._agentPlaceChess()}))}},{key:"_closeDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"_openDialog",value:function(){this.setState({dialogOpen:!0})}},{key:"_updateState",value:function(e,t){var a=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=ot(e),u=n.Open;l.role!==i.Empty&&(u=n.Over,e.updateWinPoints(l.winPoints),o=!1);var h={aiScore:s,aiTimer:c,aiThinking:o,board:e,role:t,status:u,winner:l};this.setState(xt({},h),(function(){a.state.mode===r.VsAgent&&t===i.Agent&&l.role===i.Empty&&a._agentPlaceChess()}))}},{key:"_agentPlaceChess",value:function(){var e=this;setTimeout((function(){var t=e.state,a=t.board,r=t.aiLevel,n=new Et(a).getSearchStep(i.Agent,r),o=n.timer,c=n.boardScore,s=n.point,l=Object(Ne.a)(s,2),u=l[0],h=l[1];a.placeChess(ht(u,h),i.Agent),e._updateState(a,i.Human,!1,o,c)}),500)}},{key:"_humanPlaceChess",value:function(e,t){var a=this.state,n=a.board,o=a.role,c=a.mode;c===r.VsAgent&&(n.placeChess(ht(e,t),o),this._updateState(n,i.Agent,!0)),c===r.VsHuman&&(n.placeChess(ht(e,t),o),this._updateState(n,bt(o)))}},{key:"_stepBackward",value:function(){var e=this.state,t=e.board,a=e.role,r=e.mode;t.stepBackward(r),this._updateState(t,a)}},{key:"_stepForward",value:function(){var e=this.state,t=e.board,a=e.role,r=e.mode;t.stepForward(r),this._updateState(t,a)}},{key:"render",value:function(){return s.a.createElement(C.Provider,{value:this.state},this.props.children)}}]),t}(c.Component);u.a.render(s.a.createElement(Te.a,{theme:Pe},s.a.createElement(Ft,null,s.a.createElement(ye,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/gomoku_ai",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/gomoku_ai","/service-worker.js");ke?(!function(e,t){fetch(e).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):je(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):je(t,e)}))}}()}},[[144,1,2]]]);
//# sourceMappingURL=main.885668be.chunk.js.map